# Полная инструкция по запуску приложения DogPaw на телефоне

## Что понадобится

### На компьютере
- **Node.js** 18+ — [скачать](https://nodejs.org/)
- **Go** 1.21+ — [скачать](https://go.dev/dl/)
- Компьютер и телефон в **одной Wi‑Fi сети**

### На телефоне
- **Expo Go** — установить из [Google Play](https://play.google.com/store/apps/details?id=host.exp.exponent) (Android) или [App Store](https://apps.apple.com/app/expo-go/id982107779) (iPhone)

---

## Шаг 1. Запуск бэкенда

1. Откройте терминал (CMD или PowerShell).

2. Перейдите в папку бэкенда:
   ```
   cd C:\Users\idial\projects\dog-owner-app\backend
   ```

3. Установите зависимости (выполнить один раз):
   ```
   go mod tidy
   ```

4. Запустите сервер:
   ```
   go run .
   ```

5. Должно появиться сообщение: `Server starting on :8080`  
   **Окно с бэкендом не закрывайте** — сервер должен работать всё время.

6. *(По желанию)* Заполните демо-данные. Откройте **новый** терминал и выполните:
   ```
   cd C:\Users\idial\projects\dog-owner-app\backend
   go run ./cmd/seed
   ```

---

## Шаг 2. Узнайте IP-адрес компьютера

Телефон будет обращаться к бэкенду по IP компьютера в локальной сети.

### Windows
1. Нажмите `Win + R`, введите `cmd`, Enter.
2. Выполните:
   ```
   ipconfig
   ```
3. Найдите блок **«Адаптер беспроводной локальной сети»** (Wi‑Fi).
4. Скопируйте значение **IPv4-адрес**, например: `192.168.1.105`

---

## Шаг 3. Настройка мобильного приложения

1. Откройте файл в редакторе:
   ```
   C:\Users\idial\projects\dog-owner-app\src\api\config.ts
   ```

2. Замените `localhost` на ваш IP. Было:
   ```ts
   export const API_BASE_URL = 'http://localhost:8080';
   ```
   Должно стать (подставьте свой IP):
   ```ts
   export const API_BASE_URL = 'http://192.168.1.105:8080';
   ```

3. Сохраните файл.

---

## Шаг 4. Запуск мобильного приложения

1. Откройте **новый** терминал (бэкенд продолжает работать в первом).

2. Перейдите в папку проекта:
   ```
   cd C:\Users\idial\projects\dog-owner-app
   ```

3. Установите зависимости (выполнить один раз):
   ```
   npm install
   ```
   При ошибке с `expo-asset` выполните:
   ```
   npx expo install expo-asset
   ```

4. Запустите Expo:
   ```
   npm start
   ```

5. В терминале появится **QR-код**.

---

## Шаг 5. Открытие приложения на телефоне

### Android
1. Откройте приложение **Expo Go**.
2. Нажмите **«Scan QR code»**.
3. Наведите камеру на QR-код в терминале.
4. Приложение откроется.

### iPhone
1. Откройте приложение **Камера**.
2. Наведите на QR-код в терминале.
3. Нажмите на всплывающее уведомление.
4. Приложение откроется в Expo Go.

---

## Проверка соединения с бэкендом

1. Убедитесь, что бэкенд запущен (`go run .`).
2. Убедитесь, что в `config.ts` указан правильный IP вашего компьютера.
3. Откройте в браузере на компьютере:
   ```
   http://ВАШ_IP:8080/health
   ```
   Должен вернуться ответ: `{"status":"ok"}`

---

## Частые проблемы

### «Не удаётся подключиться» или «Network request failed»
- Компьютер и телефон должны быть в одной Wi‑Fi сети.
- Проверьте IP в `config.ts`.
- Проверьте, что бэкенд запущен.
- На Windows отключите брандмауэр для порта 8080 или разрешите входящие подключения для `go.exe`.

### «expo-asset cannot be found»
Выполните:
```
npx expo install expo-asset
npm start
```

### QR-код не сканируется
- Убедитесь, что в терминале QR-код отображается полностью.
- Можно ввести URL вручную в Expo Go: нажмите «Enter URL manually» и введите адрес из терминала (например, `exp://192.168.1.105:8081`).

### Приложение открывается, но данные не загружаются
- Проверьте IP в `config.ts`.
- Выполните `go run ./cmd/seed` для загрузки демо-данных.
- Проверьте в браузере: `http://ВАШ_IP:8080/api/v1/places` — должен вернуть JSON.

---

## Краткая последовательность команд

```
# Терминал 1 — бэкенд
cd C:\Users\idial\projects\dog-owner-app\backend
go run .

# Терминал 2 — мобильное приложение
cd C:\Users\idial\projects\dog-owner-app
npm start

# Отсканировать QR-код в Expo Go на телефоне
```
